"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[574],{86334:function(e,t,n){n.d(t,{y:function(){return o}});var a=n(52322),r=(n(2784),n(55351)),i=n(60163),o=function(e){var t=e.title,n=e.description,o=e.image,l=e.cardType,c=void 0===l?"summary":l,s=e.url;return(0,a.jsx)(r.PB,{title:t,description:n,openGraph:{url:s,title:t,description:n,images:[{url:o}],site_name:"StrataLaunchpad"},twitter:{handle:"@StrataProtocol",site:i._O,cardType:c}})}},48774:function(e,t,n){n.d(t,{$:function(){return o}});var a=n(2784),r=n(64033),i=n(69204);const o=({size:e="lg",thickness:t="2px",emptyColor:n="gray.400",color:o="gray.700",speed:l="0.65s",...c})=>a.createElement(r.kC,{w:"full",h:"full",alignItems:"center",justifyContent:"center"},a.createElement(i.$,{size:e,thickness:t,emptyColor:n,color:o,speed:l,...c}))},2994:function(e,t,n){n.d(t,{E:function(){return l},c:function(){return o}});var a=n(2784),r=n(97528),i=n(46509);const o=e=>e&&0!==e?(e/4294967295*100).toFixed(2):0;function l({tokenBonding:e,isBuying:t,formRef:n}){const{metadata:l,loading:c}=(0,r.c)(e.baseMint),{metadata:s,loading:u}=(0,r.c)(e.targetMint),m=t?e.buyBaseRoyaltyPercentage:e.sellBaseRoyaltyPercentage,g=t?e.buyTargetRoyaltyPercentage:e.sellTargetRoyaltyPercentage;return a.createElement(a.Fragment,null,m>0&&a.createElement(i.t,{name:`${l?.data.symbol} Royalties`,tooltip:`A percentage of every ${l?.data.symbol} spent or received in this transaction goes to a royalties account set by the ${s?.data.symbol} owner.`,formRef:n,amount:`${o(m)}%`}),g>0&&a.createElement(i.t,{name:`${s?.data.symbol} Royalties`,tooltip:`A percentage of every ${s?.data.symbol} spent or received in this transaction goes to a royalties account set by the ${s?.data.symbol} owner.`,formRef:n,amount:`${o(g)}%`}))}},10622:function(e,t,n){n.d(t,{B:function(){return D},i:function(){return _}});var a=n(44482),r=n(64033),i=n(26062),o=n(58203),l=n(80038),c=n(26106),s=n(62381),u=n(99644),m=n(32538),g=n(6812),d=n(181),p=n(44720),y=n(2784),f=n(63955),h=n(8799),b=n(75100),E=n(24511),M=n(33596),w=n(9091),k=n(18932),v=n(91195),C=n(97528),x=n(54281),B=n(85586),A=n(12190),I=n(48774),S=n(2994),K=n(46509);const T=E.Ry({topAmount:E.Rx().required().moreThan(0),bottomAmount:E.Rx().required().moreThan(0),slippage:E.Rx().required().moreThan(0)}).required();function R({mint:e,onClick:t}){const{image:n,metadata:o}=(0,C.c)(e);return y.createElement(a.sN,{onClick:t,icon:y.createElement(r.M5,{w:8,h:8,rounded:"full"},y.createElement(i.qE,{w:"100%",h:"100%",size:"sm",src:n}))},y.createElement(r.xv,null,o?.data.symbol))}const D=({isLoading:e=!1,extraTransactionInfo:t,isSubmitting:n,onConnectWallet:E,onTradingMintsChange:C,onBuyBase:D,onSubmit:_,id:N,pricing:O,base:q,target:P,ownedBase:$,spendCap:W,feeAmount:L,baseOptions:j,targetOptions:U,mintCap:F,isBuying:Y,goLiveDate:H,numRemaining:G,showAttribution:V=!0,swapBaseWithTargetEnabled:X=!0})=>{const Z=(0,y.useRef)(),{connected:J}=(0,p.O)(),{awaitingApproval:Q}=(0,k.y)(),ee=(0,M.h)(),[te,ne]=(0,y.useState)(!1),[ae,re]=(0,y.useState)("--"),[ie,oe]=(0,y.useState)("--"),le=H&&new Date<H,{register:ce,handleSubmit:se,watch:ue,reset:me,setValue:ge,formState:{errors:de}}=(0,f.cI)({defaultValues:{topAmount:void 0,bottomAmount:void 0,slippage:1},resolver:(0,g.X)(T)}),pe=(0,B.s)(),ye=pe&&(q?.publicKey.equals(pe)||q?.publicKey.equals(d.NATIVE_MINT)),fe=ue("topAmount"),he=ue("bottomAmount"),be=ue("slippage"),Ee=($||0)>=+(fe||0),Me=+(fe||0)>W,we=(0,v.s)(),{tokenBonding:ke,childEntangler:ve,parentEntangler:Ce}=(0,x.Z)(N),xe="undefined"!==typeof G&&G<he,Be=(0,w.D)(P?.publicKey),Ae=(0,w.D)(q?.publicKey),Ie=()=>{me({slippage:be}),ne(!1),re("--"),oe("--")},[Se,Ke]=(0,y.useState)("top");(0,y.useEffect)((()=>{"bottom"==Se&&he?Re(he):fe&&Te(fe)}),[O,he,fe,Be,Ae,we]);const Te=(e=0)=>{if(ke&&O&&q&&P&&e&&+e>=0){Ke("top");const t=O.swap(+e,q.publicKey,P.publicKey,!0,we);isNaN(t)?ne(!0):(ne(!1),ge("bottomAmount",0==+e?0:(0,A._)(t,Be?Be.decimals:9)),re(`${(0,A._)(t/e,Be?Be.decimals:9)}`),oe(`${L}`))}else Ie()},Re=(e=0)=>{if(ke&&O&&q&&P&&e&&+e>=0){let t=Math.abs(O.swapTargetAmount(+e,P.publicKey,q.publicKey,!0,we));Ke("bottom"),isNaN(t)?ne(!0):(ne(!1),ge("topAmount",0==+e?0:(0,A._)(t,Ae?Ae.decimals:9)),re(`${(0,A._)(e/t,Ae?Ae.decimals:9)}`),oe(`${L}`))}else Ie()},De=(0,o.ff)("gray.400","gray.200"),_e=(0,o.ff)("solid","ghost"),ze=(0,o.ff)("gray.200","gray.500"),Ne=(0,o.ff)("gray.500","gray.200"),Oe=(0,o.ff)("gray.200","gray.500"),qe=(0,o.ff)("primary.200","black.500"),Pe=D?()=>D(ke.publicKey):ye?()=>window.open(ee):void 0;return!e&&q&&P?y.createElement(r.xu,{ref:Z,w:"full",color:Ne},y.createElement("form",{onSubmit:se((async e=>{await _({...e,lastSet:Se})}))},y.createElement(r.gC,{spacing:4,align:"stretch"},y.createElement(r.gC,{spacing:1,align:"left"},y.createElement(r.kC,{justifyContent:"space-between"},y.createElement(r.xv,{fontSize:"xs"},"You Pay"),q&&Pe&&y.createElement(r.rU,{color:"primary.500",fontSize:"xs",onClick:Pe},"Select Your Wallet from the Right top First- ",q.ticker)),y.createElement(l.BZ,{zIndex:100,size:"lg"},y.createElement(l.II,{isInvalid:!!de.topAmount,isDisabled:!J,id:"topAmount",borderColor:Oe,placeholder:"0",type:"number",fontSize:"2xl",fontWeight:"semibold",step:z(Ae?Ae.decimals:9),min:0,_placeholder:{color:"gray.200"},...ce("topAmount",{onChange:e=>Te(e.target.value)})}),y.createElement(l.xH,{w:"auto",justifyContent:"end",paddingX:1.5,rounded:"lg"},J&&y.createElement(a.v2,null,y.createElement(a.j2,{variant:_e,cursor:"pointer",isDisabled:!J,as:c.zx,rightIcon:U.length>0?y.createElement(h.IAR,null):null,leftIcon:y.createElement(r.M5,{w:6,h:6,rounded:"full"},y.createElement(i.qE,{src:q.image,w:"100%",h:"100%"})),borderRadius:"20px 6px 6px 20px",paddingX:1.5},q.ticker),y.createElement(a.qy,{borderColor:"gray.300"},j.map((e=>y.createElement(R,{mint:e,key:e.toBase58(),onClick:()=>C({base:e,target:P.publicKey&&e.equals(P.publicKey)?q.publicKey:P.publicKey})})))))))),y.createElement(r.Ug,{justify:"center",alignItems:"center",position:"relative",paddingY:2},y.createElement(r.iz,{borderColor:ze}),y.createElement(r.kC,null,!J&&y.createElement(c.zx,{size:"xs",colorScheme:"gray",variant:"outline",onClick:()=>E()},"Connect Wallet"),J&&y.createElement(c.zx,{size:"xs",colorScheme:"primary",variant:"ghost",onClick:()=>{const e=($||0)>=W?W:$||0;ge("topAmount",e),Te(e)},_hover:{bgColor:qe}},"Use Max (",($||0)>W?W:$||0," ",q.ticker,")")),y.createElement(r.iz,{borderColor:ze}),X&&y.createElement(c.hU,{isDisabled:!J,"aria-label":"Flip Tokens",size:"sm",bgColor:ze,color:"white",rounded:"full",position:"absolute",right:2,onClick:()=>{q&&P&&C({base:P.publicKey,target:q.publicKey})},icon:y.createElement(s.JO,{as:b.W$5,w:5,h:5})})),y.createElement(r.gC,{align:"left",spacing:1},y.createElement(r.xv,{fontSize:"xs"},"You Receive"),y.createElement(l.BZ,{zIndex:99,size:"lg"},y.createElement(l.II,{isInvalid:!!de.bottomAmount,isDisabled:!J,id:"bottomAmount",borderColor:Oe,placeholder:"0",type:"number",fontSize:"2xl",fontWeight:"semibold",step:z(Be?Be.decimals:9),min:0,_placeholder:{color:"gray.200"},...ce("bottomAmount",{onChange:e=>Re(e.target.value)})}),y.createElement(l.xH,{w:"auto",justifyContent:"end",paddingX:1.5,rounded:"lg"},J&&y.createElement(a.v2,null,y.createElement(a.j2,{variant:_e,rightIcon:U.length>0?y.createElement(h.IAR,null):null,isDisabled:!J,as:c.zx,leftIcon:y.createElement(r.M5,{w:6,h:6,rounded:"full"},y.createElement(i.qE,{src:P.image,w:"100%",h:"100%"})),borderRadius:"20px 6px 6px 20px",paddingX:1.5},P.ticker),y.createElement(a.qy,{borderColor:"gray.300"},U.map((e=>y.createElement(R,{mint:e,key:e.toBase58(),onClick:()=>C({target:e,base:q.publicKey&&e.equals(q.publicKey)?P.publicKey:q.publicKey})})))))))),y.createElement(r.gC,{spacing:1,padding:4,align:"stretch",borderColor:Oe,borderWidth:"1px",rounded:"lg",fontSize:"sm",opacity:J?1:.6},y.createElement(r.kC,{justify:"space-between",alignItems:"center"},y.createElement(r.xv,null,"Rate"),y.createElement(r.xv,null,"--"!==ae?`1 ${q.ticker} \u2248 ${ae} ${P.ticker}`:ae)),y.createElement(r.kC,{justify:"space-between",alignItems:"center"},y.createElement(r.Ug,null,y.createElement(r.xv,null,"Slippage"),y.createElement(u.u,{isDisabled:!J,placement:"top",label:"Your transaction will fail if the price changes unfavorably more than this percentage.",portalProps:{containerRef:Z}},y.createElement(r.kC,null,y.createElement(s.JO,{w:5,h:5,as:b.tbY,_hover:{color:"primary.500",cursor:"pointer"}})))),y.createElement(l.BZ,{size:"sm",w:"60px"},y.createElement(l.II,{isInvalid:!!de.slippage,isDisabled:!J,id:"slippage",borderColor:Oe,textAlign:"right",rounded:"lg",placeholder:"0",type:"number",fontWeight:"semibold",step:1,min:1,max:90,paddingRight:5,paddingLeft:1,...ce("slippage")}),y.createElement(l.xH,{zIndex:0,w:4,justifyContent:"end",paddingRight:1.5,rounded:"lg"},y.createElement(r.xv,{margin:0},"%")))),y.createElement(r.kC,{justify:"space-between",alignItems:"center"},y.createElement(r.xv,null,"Solana Network Fees"),y.createElement(r.kC,null,ie)),G&&y.createElement(r.kC,{justify:"space-between",alignItems:"center"},y.createElement(r.xv,null,"Remaining"),y.createElement(r.kC,null,G," / ",F)),q&&P&&O?.hierarchy.path(q.publicKey,P.publicKey).map(((e,t)=>y.createElement(S.E,{key:`royalties-${t}`,formRef:Z,tokenBonding:e.tokenBonding,isBuying:!!Y}))),(t||[]).map((e=>y.createElement(K.t,{formRef:Z,...e,key:e.name})))),y.createElement(r.xu,{position:"relative"},y.createElement(m.MT,{initialScale:.9,in:!Ee||Me||le||te||xe},y.createElement(r.M5,{bgColor:"gray.500",rounded:"md",paddingY:2,color:"white",w:"full",position:"absolute",top:-10,fontSize:"sm"},xe&&y.createElement(r.xv,null,(G||0)>0?`Only ${G} left`:"Sold Out"),Me&&y.createElement(r.xv,null,"You cannot buy more than ",W," ",q.ticker," at a time."),le&&y.createElement(r.xv,null,"Goes live at ",H&&H.toLocaleString()),!Ee&&y.createElement(r.xv,null,"Insufficient Funds for this Trade."," ",y.createElement(r.xv,{as:"u"},y.createElement(r.rU,{color:"primary.100",_hover:{color:"primary.200"},onClick:Pe},"Buy More $SOL."))),te&&Ee&&y.createElement(r.xv,null,"Insufficient Liquidity for this trade."))),!J&&y.createElement(c.zx,{w:"full",colorScheme:"primary",size:"lg",onClick:E},"Connect Wallet"),J&&y.createElement(c.zx,{isDisabled:!J||!Ee||Me||le||te||xe,w:"full",colorScheme:"primary",size:"lg",type:"submit",isLoading:Q||n,loadingText:Q?"Awaiting Approval":"Swapping $PUSSY"},"BUY $PUSSY")),V&&y.createElement(r.M5,null,y.createElement(r.Ug,{spacing:1,fontSize:"14px"},y.createElement(r.xv,{color:De},"If you are Using (Use Max), Please Remove the Last 6 Digits from the $SOL Price"),y.createElement(r.rU,{color:"primary.500",fontWeight:"medium",href:"https://t.me/PussyDA"},"Contact Support")))))):y.createElement(I.$,null)},_=y.memo(D);function z(e){return 0==e?"1":"0."+"0".repeat(Math.abs(e)-1)+"1"}},46509:function(e,t,n){n.d(t,{t:function(){return c}});var a=n(64033),r=n(99644),i=n(62381),o=n(2784),l=n(75100);const c=({name:e,tooltip:t,amount:n,formRef:c})=>o.createElement(a.kC,{justify:"space-between",alignItems:"center"},o.createElement(a.Ug,null,o.createElement(a.xv,null,e),o.createElement(r.u,{placement:"top",label:t,portalProps:{containerRef:c}},o.createElement(a.kC,null,o.createElement(i.JO,{w:5,h:5,as:l.tbY,_hover:{color:"primary.500",cursor:"pointer"}})))),o.createElement(a.kC,null,n))},82176:function(e,t,n){n.d(t,{Ai:function(){return h},P2:function(){return f},UN:function(){return M},cE:function(){return b}});var a=n(181),r=n(44720),i=n(4805),o=n(2784),l=n(11929),c=n(69900),s=n(64106),u=n(87367),m=n(9091),g=n(85586),d=n(13910),p=n(61547);function y(e,t){const n=new a.u64(Math.pow(10,t.decimals).toString()),r=e.mod(n).toNumber()/n.toNumber();return e.div(n).toNumber()+r}function f(e,t){const{amount:n}=function(e){const{info:t,loading:n}=(0,s.m)(e,((e,t)=>t.lamports));return{amount:o.useMemo((()=>(t||0)/Math.pow(10,9)),[t]),loading:n}}(e||void 0),{associatedAccount:r,loading:i}=(0,u.D)(e,t),l=(0,g.s)(),c=(0,m.D)(t),[d,p]=(0,o.useState)();return(0,o.useEffect)((()=>{t?.equals(a.NATIVE_MINT)||l&&t?.equals(l)?p(n):c&&r?p(y(r.amount,c)):!c||r||i||p(0)}),[i,r,c,n,l]),"undefined"===typeof d?d:Number(d)}function h(e){const{publicKey:t}=(0,r.O)();return f(t||void 0,e)}function b(e){const{tokenBondingSdk:t}=(0,c.D)(),{info:n}=(0,d.B)(e),{info:a}=(0,p.d)(n?.baseStorage),r=(0,m.D)(n?.targetMint),{result:i,loading:o,error:s}=(0,l.r5)((async(e,t,n,a,r)=>e&&t&&e.getPricing(t)),[t,e,n,a,r]);return{pricing:i||void 0,tokenBonding:n,loading:o,error:s}}const E=async(e,t)=>e&&(await i.ag.tokenBondingKey(e,t))[0];function M(e,t){const{result:n,loading:a}=(0,l.r5)(E,[e,t||0]),r=b(n);return{...r,loading:r.loading||a}}},33596:function(e,t,n){n.d(t,{h:function(){return r}});var a=n(44720);function r(){const{publicKey:e}=(0,a.O)();return`https://ftx.com/pay/request?coin=SOL&address=${e?.toBase58()}&tag=&wallet=sol&memoIsRequired=false&memo=&fixedWidth=true`}},77973:function(e,t,n){n.d(t,{X:function(){return i}});var a=n(2784),r=n(26399);const i=e=>(0,a.useMemo)((()=>{if(e)try{return new r.PublicKey(e)}catch{}}),[e])},91195:function(e,t,n){n.d(t,{s:function(){return o}});var a=n(26399),r=n(2784),i=n(64106);function o(){const{info:e}=(0,i.m)(a.SYSVAR_CLOCK_PUBKEY,((e,t)=>t.data.readBigInt64LE(32))),[t,n]=(0,r.useState)();return(0,r.useEffect)((()=>{n(Number(e));const t=setInterval((()=>{n((e=>e?e+1:void 0))}),1e3);return()=>{clearInterval(t)}}),[e]),Number(t)}},78728:function(e,t,n){n.d(t,{d:function(){return C}});var a=n(181),r=n(26399),i=n(83140),o=n(39180),l=n(2784),c=n(11929),s=n(89387),u=n(82176),m=n(39696),g=n(17831);const d=async e=>(await e.getFeeCalculatorForBlockhash((await e.getRecentBlockhash()).blockhash)).value?.lamportsPerSignature,p=(e,t)=>{const{loading:n,error:a,amount:r}=(e=>{const{connection:t}=(0,g.R)(),{loading:n,error:a,result:r}=(0,c.r5)(d,[t]);return{amount:(0,l.useMemo)((()=>(r||0)*e/Math.pow(10,9)),[r,e]),error:a,loading:n}})(t),{loading:i,error:o,amount:s}=(e=>{const{connection:t}=(0,g.R)(),{loading:n,error:a,result:r}=(0,c.r5)(t.getMinimumBalanceForRentExemption.bind(t),[e]);return{amount:(0,l.useMemo)((()=>(r||0)/Math.pow(10,9)),[r]),error:a,loading:n}})(e);return{amount:r&&s?r+s:void 0,error:a||o,loading:n||i}};var y=n(9091),f=n(18932),h=n(91195),b=n(69900),E=n(54281);class M{pricing;childEntanglerMint;parentEntanglerMint;get hierarchy(){return this.pricing.hierarchy}constructor({pricing:e,childEntanglerMint:t,parentEntanglerMint:n}){this.pricing=e,this.childEntanglerMint=t,this.parentEntanglerMint=n}subEntangledMint(e){return e&&e.equals(this.parentEntanglerMint)?this.childEntanglerMint:e}current(e,t){return this.pricing.current(this.subEntangledMint(e),t)}locked(e){return this.pricing.locked(this.subEntangledMint(e||this.hierarchy.tokenBonding.baseMint))}swap(e,t,n,a,r){return this.pricing.swap(e,this.subEntangledMint(t),this.subEntangledMint(n),a,r)}isBuying(e,t){return this.pricing.isBuying(this.subEntangledMint(e),this.subEntangledMint(t))}swapTargetAmount(e,t,n,a,r){return this.pricing.swapTargetAmount(e,this.subEntangledMint(t),this.subEntangledMint(n),a,r)}sellTargetAmount(e,t,n){return this.pricing.sellTargetAmount(e,this.subEntangledMint(t||this.hierarchy.tokenBonding.baseMint),n)}buyTargetAmount(e,t,n){return this.pricing.buyTargetAmount(e,this.subEntangledMint(t||this.hierarchy.tokenBonding.baseMint),n)}buyWithBaseAmount(e,t,n){return this.pricing.buyWithBaseAmount(e,this.subEntangledMint(t||this.hierarchy.tokenBonding.baseMint),n)}}var w=n(97528);function k(e){return e?[e.tokenBonding.baseMint,...k(e.parent)]:[]}async function v(e,t,n,i){if(!e||!e.wallet||!e.wallet.publicKey||!n||!i||!t)return 0;const o=t.path(n,i),l=(await Promise.all(o.map((async t=>[await a.Token.getAssociatedTokenAddress(a.ASSOCIATED_TOKEN_PROGRAM_ID,a.TOKEN_PROGRAM_ID,t.tokenBonding.baseMint,e.wallet.publicKey,!0),await a.Token.getAssociatedTokenAddress(a.ASSOCIATED_TOKEN_PROGRAM_ID,a.TOKEN_PROGRAM_ID,t.tokenBonding.targetMint,e.wallet.publicKey,!0)])))).flat(),c=Array.from(new Set(l.map((e=>e.toBase58()))));return(await Promise.all(c.map((async t=>await e.connection.getAccountInfo(new r.PublicKey(t))?0:a.AccountLayout.span)))).reduce(((e,t)=>e+t),0)}const C=({onConnectWallet:e,id:t,tradingMints:n,onTradingMintsChange:a,swap:r,extraTransactionInfo:g})=>{const{fungibleEntanglerSdk:d}=(0,b.D)(),{provider:C}=(0,f.y)(),[x,B]=(0,l.useState)(),[A,I]=(0,l.useState)(0),{tokenBonding:S,numRemaining:K,childEntangler:T,parentEntangler:R,loading:D,pricing:_,error:z}=function(e){const{tokenBonding:t,childEntangler:n,parentEntangler:a,...r}=(0,E.Z)(e),{pricing:i,...o}=(0,u.cE)(t?.publicKey),c=(0,l.useMemo)((()=>i&&n&&a?new M({pricing:i,childEntanglerMint:n?.childMint,parentEntanglerMint:a?.parentMint}):i),[i,n,a]);return{tokenBonding:t,childEntangler:n,parentEntangler:a,pricing:c,...r,...o,loading:r.loading,pricingLoading:o.loading}}(t),{base:N,target:O}=n,{image:q,metadata:P,loading:$,error:W}=(0,w.c)(N),{image:L,metadata:j,loading:U,error:F}=(0,w.c)(O),{result:Y,error:H}=(0,c.r5)(v,[C,_?.hierarchy,N,O]),{amount:G,error:V}=p(Y||0,1),X=(0,y.D)(O),Z=l.useMemo((()=>[S?.targetMint,...k(_?.hierarchy),R?.parentMint].filter(s.y).filter((e=>!T||!e.equals(T.childMint)))),[S,_]),J=(0,u.Ai)(N),{handleErrors:Q}=(0,m.U)();Q(H,W,F,V,x,z);const ee=(0,h.s)();(0,l.useEffect)((()=>{if(S&&X&&_){const e=S.purchaseCap?(0,o.EU)(S.purchaseCap,X):Number.POSITIVE_INFINITY,t=_.buyTargetAmount(e,_.hierarchy.tokenBonding.baseMint,ee);I(t)}}),[S,O,_,I,ee]);const te=(0,y.D)(T?.childMint),ne=N&&{name:P?.data.name||"",ticker:P?.data.symbol||"",image:q,publicKey:N},ae=O&&{name:j?.data.name||"",ticker:j?.data.symbol||"",image:L,publicKey:O};function re(e){return e&&R&&T&&e.equals(R.parentMint)?T.childMint:e}const ie=(0,l.useMemo)((()=>re(ne?.publicKey)),[ne?.publicKey.toBase58(),R,T]),oe=(0,l.useMemo)((()=>re(ae?.publicKey)),[ae?.publicKey.toBase58(),R,T]),le=(0,l.useMemo)((()=>{try{if(ie&&oe)return _?.hierarchy.lowest(ie,oe)}catch(e){console.warn(e)}}),[_,ie,oe]),ce=le&&_?.hierarchy.findTarget(le);return{extraTransactionInfo:g,numRemaining:K,mintCap:ce&&X&&ce.mintCap&&(0,i.He)(ce.mintCap,X),loading:U||$||D||!S||!P,onConnectWallet:e,onTradingMintsChange:a,onBuyBase:()=>{const e=_.hierarchy.findTarget(N);a({base:e.baseMint,target:e.targetMint})},onSubmit:async e=>{if(e.topAmount)try{const t=_?.hierarchy.path(N,O);let n="bottom"==e.lastSet&&t&&1==t.length&&t[0].tokenBonding.targetMint.equals(O),a={baseAmount:+e.topAmount,expectedOutputAmount:+e.bottomAmount};n&&(a={desiredTargetAmount:+e.bottomAmount,expectedBaseAmount:+e.topAmount});const o=R&&T&&R.parentMint.equals(N)?T.childMint:N,l=R&&T&&R.parentMint.equals(O)?T.childMint:O;await r({baseMint:o,targetMint:l,...a,slippage:+e.slippage/100,ticker:ae.ticker,async preInstructions({isFirst:e,amount:t,isBuy:n}){if(!e||!T||!R||n||!d)return{instructions:[],signers:[],output:null};let a=(0,i.He)(t,te);return await(d?.swapParentForChildInstructions({parentEntangler:R.publicKey,childEntangler:T.publicKey,amount:a}))},postInstructions:async({isLast:e,amount:t,isBuy:n})=>e&&T&&R&&n&&d?await(d?.swapChildForParentInstructions({parentEntangler:R.publicKey,childEntangler:T.publicKey,all:!0})):{instructions:[],signers:[],output:null}})}catch(t){B(t)}},id:t,pricing:_,base:ne,target:ae,ownedBase:J,spendCap:A,feeAmount:G,isBuying:Boolean(_&&le&&ae&&_.isBuying(le,ae.publicKey)),goLiveDate:ce&&new Date(1e3*ce.goLiveUnixTime.toNumber()),baseOptions:l.useMemo((()=>Z.filter((e=>N&&!e.equals(N)))),[N,Z]),targetOptions:l.useMemo((()=>Z.filter((e=>O&&_&&N&&!e.equals(O)))),[O,Z]),swapBaseWithTargetEnabled:Boolean(N&&O&&_&&oe&&ie&&_.hierarchy.path(oe,ie).length>0)}}},13146:function(e,t,n){n.d(t,{y:function(){return o}});var a=n(4805),r=n(11929),i=n(13910);function o(e,t){const{result:n,loading:o,error:l}=(0,r.r5)((async(e,t)=>e&&a.ag.tokenBondingKey(e,t)),[e,t||0]),c=(0,i.B)(n&&n[0]);return{...c,loading:c.loading||o,error:l}}},54281:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(83140),r=n(64106),i=n(69900);var o=n(9091),l=n(61547),c=n(13146);function s(e){const{info:t,loading:n}=function(e){const{fungibleEntanglerSdk:t}=(0,i.D)();return(0,r.m)(e,t?.childEntanglerDecoder)}(e),{info:s,loading:u}=function(e){const{fungibleEntanglerSdk:t}=(0,i.D)();return(0,r.m)(e,t?.parentEntanglerDecoder)}(t?.parentEntangler),{info:m,loading:g}=(0,c.y)(t?.childMint,0),{info:d}=(0,l.d)(s?.parentStorage),p=(0,o.D)(s?.parentMint);return{tokenBonding:m,numRemaining:d&&p&&(0,a.He)(d?.amount,p),childEntangler:t,parentEntangler:s,loading:n||u||g}}function u(e){const{info:t,loading:n}=(0,c.y)(e,0),r=(0,o.D)(t?.targetMint),i=s(e),{info:l,loading:u}=(0,c.y)(e,1);if(t){const e=r&&(0,a.He)(r.supply,r),i=t&&r&&t.mintCap&&(0,a.He)(t.mintCap,r);return{tokenBonding:t,retrievalTokenBonding:l,numRemaining:"undefined"!=typeof e&&i?i-e:void 0,loading:n||u}}return i}},12190:function(e,t,n){function a(e,t){return Math.trunc(e*Math.pow(10,t))/Math.pow(10,t)}n.d(t,{_:function(){return a}})}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[574],{86334:function(e,t,n){n.d(t,{y:function(){return o}});var a=n(52322),r=(n(2784),n(55351)),i=n(60163),o=function(e){var t=e.title,n=e.description,o=e.image,l=e.cardType,c=void 0===l?"summary":l,s=e.url;return(0,a.jsx)(r.PB,{title:t,description:n,openGraph:{url:s,title:t,description:n,images:[{url:o}],site_name:"StrataLaunchpad"},twitter:{handle:"@StrataProtocol",site:i._O,cardType:c}})}},48774:function(e,t,n){n.d(t,{$:function(){return o}});var a=n(2784),r=n(64033),i=n(69204);const o=({size:e="lg",thickness:t="2px",emptyColor:n="gray.400",color:o="gray.700",speed:l="0.65s",...c})=>a.createElement(r.kC,{w:"full",h:"full",alignItems:"center",justifyContent:"center"},a.createElement(i.$,{size:e,thickness:t,emptyColor:n,color:o,speed:l,...c}))},2994:function(e,t,n){n.d(t,{E:function(){return l},c:function(){return o}});var a=n(2784),r=n(97528),i=n(46509);const o=e=>e&&0!==e?(e/4294967295*100).toFixed(2):0;function l({tokenBonding:e,isBuying:t,formRef:n}){const{metadata:l,loading:c}=(0,r.c)(e.baseMint),{metadata:s,loading:u}=(0,r.c)(e.targetMint),m=t?e.buyBaseRoyaltyPercentage:e.sellBaseRoyaltyPercentage,g=t?e.buyTargetRoyaltyPercentage:e.sellTargetRoyaltyPercentage;return a.createElement(a.Fragment,null,m>0&&a.createElement(i.t,{name:`${l?.data.symbol} Royalties`,tooltip:`A percentage of every ${l?.data.symbol} spent or received in this transaction goes to a royalties account set by the ${s?.data.symbol} owner.`,formRef:n,amount:`${o(m)}%`}),g>0&&a.createElement(i.t,{name:`${s?.data.symbol} Royalties`,tooltip:`A percentage of every ${s?.data.symbol} spent or received in this transaction goes to a royalties account set by the ${s?.data.symbol} owner.`,formRef:n,amount:`${o(g)}%`}))}},10622:function(e,t,n){n.d(t,{B:function(){return D},i:function(){return _}});var a=n(44482),r=n(64033),i=n(26062),o=n(58203),l=n(80038),c=n(26106),s=n(62381),u=n(99644),m=n(32538),g=n(6812),d=n(181),p=n(44720),y=n(2784),f=n(63955),h=n(8799),b=n(75100),E=n(24511),M=n(33596),w=n(9091),k=n(18932),v=n(91195),C=n(97528),x=n(54281),B=n(85586),A=n(12190),I=n(48774),S=n(2994),K=n(46509);const T=E.Ry({topAmount:E.Rx().required().moreThan(0),bottomAmount:E.Rx().required().moreThan(0),slippage:E.Rx().required().moreThan(0)}).required();function R({mint:e,onClick:t}){const{image:n,metadata:o}=(0,C.c)(e);return y.createElement(a.sN,{onClick:t,icon:y.createElement(r.M5,{w:8,h:8,rounded:"full"},y.createElement(i.qE,{w:"100%",h:"100%",size:"sm",src:n}))},y.createElement(r.xv,null,o?.data.symbol))}const D=({isLoading:e=!1,extraTransactionInfo:t,isSubmitting:n,onConnectWallet:E,onTradingMintsChange:C,onBuyBase:D,onSubmit:_,id:N,pricing:O,base:q,target:P,ownedBase:$,spendCap:W,feeAmount:L,baseOptions:j,targetOptions:U,mintCap:F,isBuying:Y,goLiveDate:H,numRemaining:G,showAttribution:V=!0,swapBaseWithTargetEnabled:X=!0})=>{const Z=(0,y.useRef)(),{connected:J}=(0,p.O)(),{awaitingApproval:Q}=(0,k.y)(),ee=(0,M.h)(),[te,ne]=(0,y.useState)(!1),[ae,re]=(0,y.useState)("--"),[ie,oe]=(0,y.useState)("--"),le=H&&new Date<H,{register:ce,handleSubmit:se,watch:ue,reset:me,setValue:ge,formState:{errors:de}}=(0,f.cI)({defaultValues:{topAmount:void 0,bottomAmount:void 0,slippage:1},resolver:(0,g.X)(T)}),pe=(0,B.s)(),ye=pe&&(q?.publicKey.equals(pe)||q?.publicKey.equals(d.NATIVE_MINT)),fe=ue("topAmount"),he=ue("bottomAmount"),be=ue("slippage"),Ee=($||0)>=+(fe||0),Me=+(fe||0)>W,we=(0,v.s)(),{tokenBonding:ke,childEntangler:ve,parentEntangler:Ce}=(0,x.Z)(N),xe="undefined"!==typeof G&&G<he,Be=(0,w.D)(P?.publicKey),Ae=(0,w.D)(q?.publicKey),Ie=()=>{me({slippage:be}),ne(!1),re("--"),oe("--")},[Se,Ke]=(0,y.useState)("top");(0,y.useEffect)((()=>{"bottom"==Se&&he?Re(he):fe&&Te(fe)}),[O,he,fe,Be,Ae,we]);const Te=(e=0)=>{if(ke&&O&&q&&P&&e&&+e>=0){Ke("top");const t=O.swap(+e,q.publicKey,P.publicKey,!0,we);isNaN(t)?ne(!0):(ne(!1),ge("bottomAmount",0==+e?0:(0,A._)(t,Be?Be.decimals:9)),re(`${(0,A._)(t/e,Be?Be.decimals:9)}`),oe(`${L}`))}else Ie()},Re=(e=0)=>{if(ke&&O&&q&&P&&e&&+e>=0){let t=Math.abs(O.swapTargetAmount(+e,P.publicKey,q.publicKey,!0,we));Ke("bottom"),isNaN(t)?ne(!0):(ne(!1),ge("topAmount",0==+e?0:(0,A._)(t,Ae?Ae.decimals:9)),re(`${(0,A._)(e/t,Ae?Ae.decimals:9)}`),oe(`${L}`))}else Ie()},De=(0,o.ff)("gray.400","gray.200"),_e=(0,o.ff)("solid","ghost"),ze=(0,o.ff)("gray.200","gray.500"),Ne=(0,o.ff)("gray.500","gray.200"),Oe=(0,o.ff)("gray.200","gray.500"),qe=(0,o.ff)("primary.200","black.500"),Pe=D?()=>D(ke.publicKey):ye?()=>window.open(ee):void 0;return!e&&q&&P?y.createElement(r.xu,{ref:Z,w:"full",color:Ne},y.createElement("form",{onSubmit:se((async e=>{await _({...e,lastSet:Se})}))},y.createElement(r.gC,{spacing:4,align:"stretch"},y.createElement(r.gC,{spacing:1,align:"left"},y.createElement(r.kC,{justifyContent:"space-between"},y.createElement(r.xv,{fontSize:"xs"},"You Pay"),q&&Pe&&y.createElement(r.rU,{color:"primary.500",fontSize:"xs",onClick:Pe},"Select Your Wallet from the Right top First -",q.ticker)),y.createElement(l.BZ,{zIndex:100,size:"lg"},y.createElement(l.II,{isInvalid:!!de.topAmount,isDisabled:!J,id:"topAmount",borderColor:Oe,placeholder:"0",type:"number",fontSize:"2xl",fontWeight:"semibold",step:z(Ae?Ae.decimals:9),min:0,_placeholder:{color:"gray.200"},...ce("topAmount",{onChange:e=>Te(e.target.value)})}),y.createElement(l.xH,{w:"auto",justifyContent:"end",paddingX:1.5,rounded:"lg"},J&&y.createElement(a.v2,null,y.createElement(a.j2,{variant:_e,cursor:"pointer",isDisabled:!J,as:c.zx,rightIcon:U.length>0?y.createElement(h.IAR,null):null,leftIcon:y.createElement(r.M5,{w:6,h:6,rounded:"full"},y.createElement(i.qE,{src:q.image,w:"100%",h:"100%"})),borderRadius:"20px 6px 6px 20px",paddingX:1.5},q.ticker),y.createElement(a.qy,{borderColor:"gray.300"},j.map((e=>y.createElement(R,{mint:e,key:e.toBase58(),onClick:()=>C({base:e,target:P.publicKey&&e.equals(P.publicKey)?q.publicKey:P.publicKey})})))))))),y.createElement(r.Ug,{justify:"center",alignItems:"center",position:"relative",paddingY:2},y.createElement(r.iz,{borderColor:ze}),y.createElement(r.kC,null,!J&&y.createElement(c.zx,{size:"xs",colorScheme:"gray",variant:"outline",onClick:()=>E()},"Connect Wallet"),J&&y.createElement(c.zx,{size:"xs",colorScheme:"primary",variant:"ghost",onClick:()=>{const e=($||0)>=W?W:$||0;ge("topAmount",e),Te(e)},_hover:{bgColor:qe}},"Use Max (",($||0)>W?W:$||0," ",q.ticker,")")),y.createElement(r.iz,{borderColor:ze}),X&&y.createElement(c.hU,{isDisabled:!J,"aria-label":"Flip Tokens",size:"sm",bgColor:ze,color:"white",rounded:"full",position:"absolute",right:2,onClick:()=>{q&&P&&C({base:P.publicKey,target:q.publicKey})},icon:y.createElement(s.JO,{as:b.W$5,w:5,h:5})})),y.createElement(r.gC,{align:"left",spacing:1},y.createElement(r.xv,{fontSize:"xs"},"You Receive"),y.createElement(l.BZ,{zIndex:99,size:"lg"},y.createElement(l.II,{isInvalid:!!de.bottomAmount,isDisabled:!J,id:"bottomAmount",borderColor:Oe,placeholder:"0",type:"number",fontSize:"2xl",fontWeight:"semibold",step:z(Be?Be.decimals:9),min:0,_placeholder:{color:"gray.200"},...ce("bottomAmount",{onChange:e=>Re(e.target.value)})}),y.createElement(l.xH,{w:"auto",justifyContent:"end",paddingX:1.5,rounded:"lg"},J&&y.createElement(a.v2,null,y.createElement(a.j2,{variant:_e,rightIcon:U.length>0?y.createElement(h.IAR,null):null,isDisabled:!J,as:c.zx,leftIcon:y.createElement(r.M5,{w:6,h:6,rounded:"full"},y.createElement(i.qE,{src:P.image,w:"100%",h:"100%"})),borderRadius:"20px 6px 6px 20px",paddingX:1.5},P.ticker),y.createElement(a.qy,{borderColor:"gray.300"},U.map((e=>y.createElement(R,{mint:e,key:e.toBase58(),onClick:()=>C({target:e,base:q.publicKey&&e.equals(q.publicKey)?P.publicKey:q.publicKey})})))))))),y.createElement(r.gC,{spacing:1,padding:4,align:"stretch",borderColor:Oe,borderWidth:"1px",rounded:"lg",fontSize:"sm",opacity:J?1:.6},y.createElement(r.kC,{justify:"space-between",alignItems:"center"},y.createElement(r.xv,null,"Rate"),y.createElement(r.xv,null,"--"!==ae?`1 ${q.ticker} \u2248 ${ae} ${P.ticker}`:ae)),y.createElement(r.kC,{justify:"space-between",alignItems:"center"},y.createElement(r.Ug,null,y.createElement(r.xv,null,"Slippage"),y.createElement(u.u,{isDisabled:!J,placement:"top",label:"Your transaction will fail if the price changes unfavorably more than this percentage.",portalProps:{containerRef:Z}},y.createElement(r.kC,null,y.createElement(s.JO,{w:5,h:5,as:b.tbY,_hover:{color:"primary.500",cursor:"pointer"}})))),y.createElement(l.BZ,{size:"sm",w:"60px"},y.createElement(l.II,{isInvalid:!!de.slippage,isDisabled:!J,id:"slippage",borderColor:Oe,textAlign:"right",rounded:"lg",placeholder:"0",type:"number",fontWeight:"semibold",step:1,min:1,max:90,paddingRight:5,paddingLeft:1,...ce("slippage")}),y.createElement(l.xH,{zIndex:0,w:4,justifyContent:"end",paddingRight:1.5,rounded:"lg"},y.createElement(r.xv,{margin:0},"%")))),y.createElement(r.kC,{justify:"space-between",alignItems:"center"},y.createElement(r.xv,null,"Solana Network Fees"),y.createElement(r.kC,null,ie)),G&&y.createElement(r.kC,{justify:"space-between",alignItems:"center"},y.createElement(r.xv,null,"Remaining"),y.createElement(r.kC,null,G," / ",F)),q&&P&&O?.hierarchy.path(q.publicKey,P.publicKey).map(((e,t)=>y.createElement(S.E,{key:`royalties-${t}`,formRef:Z,tokenBonding:e.tokenBonding,isBuying:!!Y}))),(t||[]).map((e=>y.createElement(K.t,{formRef:Z,...e,key:e.name})))),y.createElement(r.xu,{position:"relative"},y.createElement(m.MT,{initialScale:.9,in:!Ee||Me||le||te||xe},y.createElement(r.M5,{bgColor:"gray.500",rounded:"md",paddingY:2,color:"white",w:"full",position:"absolute",top:-10,fontSize:"sm"},xe&&y.createElement(r.xv,null,(G||0)>0?`Only ${G} left`:"Sold Out"),Me&&y.createElement(r.xv,null,"You cannot buy more than ",W," ",q.ticker," at a time."),le&&y.createElement(r.xv,null,"Goes live at ",H&&H.toLocaleString()),!Ee&&y.createElement(r.xv,null,"Insufficient Funds for this Trade."," ",y.createElement(r.xv,{as:"u"},y.createElement(r.rU,{color:"primary.100",_hover:{color:"primary.200"},onClick:Pe},"Buy More $SOL."))),te&&Ee&&y.createElement(r.xv,null,"Insufficient Liquidity for this trade."))),!J&&y.createElement(c.zx,{w:"full",colorScheme:"primary",size:"lg",onClick:E},"Connect Wallet"),J&&y.createElement(c.zx,{isDisabled:!J||!Ee||Me||le||te||xe,w:"full",colorScheme:"primary",size:"lg",type:"submit",isLoading:Q||n,loadingText:Q?"Awaiting Approval":"Swapping"},"Trade")),V&&y.createElement(r.M5,null,y.createElement(r.Ug,{spacing:1,fontSize:"14px"},y.createElement(r.xv,{color:De},"Powered by"),y.createElement(r.rU,{color:"primary.500",fontWeight:"medium",href:"https://strataprotocol.com"},"Strata")))))):y.createElement(I.$,null)},_=y.memo(D);function z(e){return 0==e?"1":"0."+"0".repeat(Math.abs(e)-1)+"1"}},46509:function(e,t,n){n.d(t,{t:function(){return c}});var a=n(64033),r=n(99644),i=n(62381),o=n(2784),l=n(75100);const c=({name:e,tooltip:t,amount:n,formRef:c})=>o.createElement(a.kC,{justify:"space-between",alignItems:"center"},o.createElement(a.Ug,null,o.createElement(a.xv,null,e),o.createElement(r.u,{placement:"top",label:t,portalProps:{containerRef:c}},o.createElement(a.kC,null,o.createElement(i.JO,{w:5,h:5,as:l.tbY,_hover:{color:"primary.500",cursor:"pointer"}})))),o.createElement(a.kC,null,n))},82176:function(e,t,n){n.d(t,{Ai:function(){return h},P2:function(){return f},UN:function(){return M},cE:function(){return b}});var a=n(181),r=n(44720),i=n(4805),o=n(2784),l=n(11929),c=n(69900),s=n(64106),u=n(87367),m=n(9091),g=n(85586),d=n(13910),p=n(61547);function y(e,t){const n=new a.u64(Math.pow(10,t.decimals).toString()),r=e.mod(n).toNumber()/n.toNumber();return e.div(n).toNumber()+r}function f(e,t){const{amount:n}=function(e){const{info:t,loading:n}=(0,s.m)(e,((e,t)=>t.lamports));return{amount:o.useMemo((()=>(t||0)/Math.pow(10,9)),[t]),loading:n}}(e||void 0),{associatedAccount:r,loading:i}=(0,u.D)(e,t),l=(0,g.s)(),c=(0,m.D)(t),[d,p]=(0,o.useState)();return(0,o.useEffect)((()=>{t?.equals(a.NATIVE_MINT)||l&&t?.equals(l)?p(n):c&&r?p(y(r.amount,c)):!c||r||i||p(0)}),[i,r,c,n,l]),"undefined"===typeof d?d:Number(d)}function h(e){const{publicKey:t}=(0,r.O)();return f(t||void 0,e)}function b(e){const{tokenBondingSdk:t}=(0,c.D)(),{info:n}=(0,d.B)(e),{info:a}=(0,p.d)(n?.baseStorage),r=(0,m.D)(n?.targetMint),{result:i,loading:o,error:s}=(0,l.r5)((async(e,t,n,a,r)=>e&&t&&e.getPricing(t)),[t,e,n,a,r]);return{pricing:i||void 0,tokenBonding:n,loading:o,error:s}}const E=async(e,t)=>e&&(await i.ag.tokenBondingKey(e,t))[0];function M(e,t){const{result:n,loading:a}=(0,l.r5)(E,[e,t||0]),r=b(n);return{...r,loading:r.loading||a}}},33596:function(e,t,n){n.d(t,{h:function(){return r}});var a=n(44720);function r(){const{publicKey:e}=(0,a.O)();return`https://ftx.com/pay/request?coin=SOL&address=${e?.toBase58()}&tag=&wallet=sol&memoIsRequired=false&memo=&fixedWidth=true`}},77973:function(e,t,n){n.d(t,{X:function(){return i}});var a=n(2784),r=n(26399);const i=e=>(0,a.useMemo)((()=>{if(e)try{return new r.PublicKey(e)}catch{}}),[e])},91195:function(e,t,n){n.d(t,{s:function(){return o}});var a=n(26399),r=n(2784),i=n(64106);function o(){const{info:e}=(0,i.m)(a.SYSVAR_CLOCK_PUBKEY,((e,t)=>t.data.readBigInt64LE(32))),[t,n]=(0,r.useState)();return(0,r.useEffect)((()=>{n(Number(e));const t=setInterval((()=>{n((e=>e?e+1:void 0))}),1e3);return()=>{clearInterval(t)}}),[e]),Number(t)}},78728:function(e,t,n){n.d(t,{d:function(){return C}});var a=n(181),r=n(26399),i=n(83140),o=n(39180),l=n(2784),c=n(11929),s=n(89387),u=n(82176),m=n(39696),g=n(17831);const d=async e=>(await e.getFeeCalculatorForBlockhash((await e.getRecentBlockhash()).blockhash)).value?.lamportsPerSignature,p=(e,t)=>{const{loading:n,error:a,amount:r}=(e=>{const{connection:t}=(0,g.R)(),{loading:n,error:a,result:r}=(0,c.r5)(d,[t]);return{amount:(0,l.useMemo)((()=>(r||0)*e/Math.pow(10,9)),[r,e]),error:a,loading:n}})(t),{loading:i,error:o,amount:s}=(e=>{const{connection:t}=(0,g.R)(),{loading:n,error:a,result:r}=(0,c.r5)(t.getMinimumBalanceForRentExemption.bind(t),[e]);return{amount:(0,l.useMemo)((()=>(r||0)/Math.pow(10,9)),[r]),error:a,loading:n}})(e);return{amount:r&&s?r+s:void 0,error:a||o,loading:n||i}};var y=n(9091),f=n(18932),h=n(91195),b=n(69900),E=n(54281);class M{pricing;childEntanglerMint;parentEntanglerMint;get hierarchy(){return this.pricing.hierarchy}constructor({pricing:e,childEntanglerMint:t,parentEntanglerMint:n}){this.pricing=e,this.childEntanglerMint=t,this.parentEntanglerMint=n}subEntangledMint(e){return e&&e.equals(this.parentEntanglerMint)?this.childEntanglerMint:e}current(e,t){return this.pricing.current(this.subEntangledMint(e),t)}locked(e){return this.pricing.locked(this.subEntangledMint(e||this.hierarchy.tokenBonding.baseMint))}swap(e,t,n,a,r){return this.pricing.swap(e,this.subEntangledMint(t),this.subEntangledMint(n),a,r)}isBuying(e,t){return this.pricing.isBuying(this.subEntangledMint(e),this.subEntangledMint(t))}swapTargetAmount(e,t,n,a,r){return this.pricing.swapTargetAmount(e,this.subEntangledMint(t),this.subEntangledMint(n),a,r)}sellTargetAmount(e,t,n){return this.pricing.sellTargetAmount(e,this.subEntangledMint(t||this.hierarchy.tokenBonding.baseMint),n)}buyTargetAmount(e,t,n){return this.pricing.buyTargetAmount(e,this.subEntangledMint(t||this.hierarchy.tokenBonding.baseMint),n)}buyWithBaseAmount(e,t,n){return this.pricing.buyWithBaseAmount(e,this.subEntangledMint(t||this.hierarchy.tokenBonding.baseMint),n)}}var w=n(97528);function k(e){return e?[e.tokenBonding.baseMint,...k(e.parent)]:[]}async function v(e,t,n,i){if(!e||!e.wallet||!e.wallet.publicKey||!n||!i||!t)return 0;const o=t.path(n,i),l=(await Promise.all(o.map((async t=>[await a.Token.getAssociatedTokenAddress(a.ASSOCIATED_TOKEN_PROGRAM_ID,a.TOKEN_PROGRAM_ID,t.tokenBonding.baseMint,e.wallet.publicKey,!0),await a.Token.getAssociatedTokenAddress(a.ASSOCIATED_TOKEN_PROGRAM_ID,a.TOKEN_PROGRAM_ID,t.tokenBonding.targetMint,e.wallet.publicKey,!0)])))).flat(),c=Array.from(new Set(l.map((e=>e.toBase58()))));return(await Promise.all(c.map((async t=>await e.connection.getAccountInfo(new r.PublicKey(t))?0:a.AccountLayout.span)))).reduce(((e,t)=>e+t),0)}const C=({onConnectWallet:e,id:t,tradingMints:n,onTradingMintsChange:a,swap:r,extraTransactionInfo:g})=>{const{fungibleEntanglerSdk:d}=(0,b.D)(),{provider:C}=(0,f.y)(),[x,B]=(0,l.useState)(),[A,I]=(0,l.useState)(0),{tokenBonding:S,numRemaining:K,childEntangler:T,parentEntangler:R,loading:D,pricing:_,error:z}=function(e){const{tokenBonding:t,childEntangler:n,parentEntangler:a,...r}=(0,E.Z)(e),{pricing:i,...o}=(0,u.cE)(t?.publicKey),c=(0,l.useMemo)((()=>i&&n&&a?new M({pricing:i,childEntanglerMint:n?.childMint,parentEntanglerMint:a?.parentMint}):i),[i,n,a]);return{tokenBonding:t,childEntangler:n,parentEntangler:a,pricing:c,...r,...o,loading:r.loading,pricingLoading:o.loading}}(t),{base:N,target:O}=n,{image:q,metadata:P,loading:$,error:W}=(0,w.c)(N),{image:L,metadata:j,loading:U,error:F}=(0,w.c)(O),{result:Y,error:H}=(0,c.r5)(v,[C,_?.hierarchy,N,O]),{amount:G,error:V}=p(Y||0,1),X=(0,y.D)(O),Z=l.useMemo((()=>[S?.targetMint,...k(_?.hierarchy),R?.parentMint].filter(s.y).filter((e=>!T||!e.equals(T.childMint)))),[S,_]),J=(0,u.Ai)(N),{handleErrors:Q}=(0,m.U)();Q(H,W,F,V,x,z);const ee=(0,h.s)();(0,l.useEffect)((()=>{if(S&&X&&_){const e=S.purchaseCap?(0,o.EU)(S.purchaseCap,X):Number.POSITIVE_INFINITY,t=_.buyTargetAmount(e,_.hierarchy.tokenBonding.baseMint,ee);I(t)}}),[S,O,_,I,ee]);const te=(0,y.D)(T?.childMint),ne=N&&{name:P?.data.name||"",ticker:P?.data.symbol||"",image:q,publicKey:N},ae=O&&{name:j?.data.name||"",ticker:j?.data.symbol||"",image:L,publicKey:O};function re(e){return e&&R&&T&&e.equals(R.parentMint)?T.childMint:e}const ie=(0,l.useMemo)((()=>re(ne?.publicKey)),[ne?.publicKey.toBase58(),R,T]),oe=(0,l.useMemo)((()=>re(ae?.publicKey)),[ae?.publicKey.toBase58(),R,T]),le=(0,l.useMemo)((()=>{try{if(ie&&oe)return _?.hierarchy.lowest(ie,oe)}catch(e){console.warn(e)}}),[_,ie,oe]),ce=le&&_?.hierarchy.findTarget(le);return{extraTransactionInfo:g,numRemaining:K,mintCap:ce&&X&&ce.mintCap&&(0,i.He)(ce.mintCap,X),loading:U||$||D||!S||!P,onConnectWallet:e,onTradingMintsChange:a,onBuyBase:()=>{const e=_.hierarchy.findTarget(N);a({base:e.baseMint,target:e.targetMint})},onSubmit:async e=>{if(e.topAmount)try{const t=_?.hierarchy.path(N,O);let n="bottom"==e.lastSet&&t&&1==t.length&&t[0].tokenBonding.targetMint.equals(O),a={baseAmount:+e.topAmount,expectedOutputAmount:+e.bottomAmount};n&&(a={desiredTargetAmount:+e.bottomAmount,expectedBaseAmount:+e.topAmount});const o=R&&T&&R.parentMint.equals(N)?T.childMint:N,l=R&&T&&R.parentMint.equals(O)?T.childMint:O;await r({baseMint:o,targetMint:l,...a,slippage:+e.slippage/100,ticker:ae.ticker,async preInstructions({isFirst:e,amount:t,isBuy:n}){if(!e||!T||!R||n||!d)return{instructions:[],signers:[],output:null};let a=(0,i.He)(t,te);return await(d?.swapParentForChildInstructions({parentEntangler:R.publicKey,childEntangler:T.publicKey,amount:a}))},postInstructions:async({isLast:e,amount:t,isBuy:n})=>e&&T&&R&&n&&d?await(d?.swapChildForParentInstructions({parentEntangler:R.publicKey,childEntangler:T.publicKey,all:!0})):{instructions:[],signers:[],output:null}})}catch(t){B(t)}},id:t,pricing:_,base:ne,target:ae,ownedBase:J,spendCap:A,feeAmount:G,isBuying:Boolean(_&&le&&ae&&_.isBuying(le,ae.publicKey)),goLiveDate:ce&&new Date(1e3*ce.goLiveUnixTime.toNumber()),baseOptions:l.useMemo((()=>Z.filter((e=>N&&!e.equals(N)))),[N,Z]),targetOptions:l.useMemo((()=>Z.filter((e=>O&&_&&N&&!e.equals(O)))),[O,Z]),swapBaseWithTargetEnabled:Boolean(N&&O&&_&&oe&&ie&&_.hierarchy.path(oe,ie).length>0)}}},13146:function(e,t,n){n.d(t,{y:function(){return o}});var a=n(4805),r=n(11929),i=n(13910);function o(e,t){const{result:n,loading:o,error:l}=(0,r.r5)((async(e,t)=>e&&a.ag.tokenBondingKey(e,t)),[e,t||0]),c=(0,i.B)(n&&n[0]);return{...c,loading:c.loading||o,error:l}}},54281:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(83140),r=n(64106),i=n(69900);var o=n(9091),l=n(61547),c=n(13146);function s(e){const{info:t,loading:n}=function(e){const{fungibleEntanglerSdk:t}=(0,i.D)();return(0,r.m)(e,t?.childEntanglerDecoder)}(e),{info:s,loading:u}=function(e){const{fungibleEntanglerSdk:t}=(0,i.D)();return(0,r.m)(e,t?.parentEntanglerDecoder)}(t?.parentEntangler),{info:m,loading:g}=(0,c.y)(t?.childMint,0),{info:d}=(0,l.d)(s?.parentStorage),p=(0,o.D)(s?.parentMint);return{tokenBonding:m,numRemaining:d&&p&&(0,a.He)(d?.amount,p),childEntangler:t,parentEntangler:s,loading:n||u||g}}function u(e){const{info:t,loading:n}=(0,c.y)(e,0),r=(0,o.D)(t?.targetMint),i=s(e),{info:l,loading:u}=(0,c.y)(e,1);if(t){const e=r&&(0,a.He)(r.supply,r),i=t&&r&&t.mintCap&&(0,a.He)(t.mintCap,r);return{tokenBonding:t,retrievalTokenBonding:l,numRemaining:"undefined"!=typeof e&&i?i-e:void 0,loading:n||u}}return i}},12190:function(e,t,n){function a(e,t){return Math.trunc(e*Math.pow(10,t))/Math.pow(10,t)}n.d(t,{_:function(){return a}})}}]);